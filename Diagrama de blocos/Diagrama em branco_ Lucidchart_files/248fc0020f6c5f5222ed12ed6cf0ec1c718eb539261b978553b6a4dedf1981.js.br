function l_ecl(a,b,c){a.qig.set(b,c)}function l_fcl(a,b,c){a.Bbh.set(b,c)}function l_gcl(a,b){const c=b.kza;b=b.item;l_hg(a.bRg,c,[]).push(b);a.qdf.dispatchEvent(new l_LKf(c))}function l_hcl(a,b){var c,d;null===(c=a.Fb.value.get(l_02(b)))||void 0===c?void 0:c.setContent(l__2.Bi,l__2.TKe);c=a.bI.value.filter(e=>e!=b);a.bI.Pa(c);c=null===(d=l_mai(a,b))||void 0===d?void 0:d.type;a.vHa.q1(b);c&&l_$$h(a.moc,"deleted",c)}
function l_icl(a,b){return new l_Ge(a,c=>{const d=b.Ei.get(c);return{pipe:new l_u(d||null,()=>[new l_(d?l_eu(d.Ca.value):new l_A([]),l_zgj,l_rgj,l_sgj,l_tgj)],l_Oi(l_.hb)),Ml:!0}})}var l_jcl={color:"color",shape:"shape",icon:"icon"},l_kcl=l_s('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <rect x="2" y="2" width="20" height="20" fill="url(#AdvancedColorPicker24Icon-icon-id-pattern0)"/>\n        <defs>\n            <pattern id="AdvancedColorPicker24Icon-icon-id-pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">\n                <use xlink:href="#AdvancedColorPicker24Icon-icon-id-image0" transform="scale(0.0227273)"/>\n            </pattern>\n            <image id="AdvancedColorPicker24Icon-icon-id-image0" width="44" height="44" xlink:href="data:image/png;base64,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"/>\n        </defs>\n    </svg>');var l_lcl=class extends l_uu{constructor(a,b){super();this.properties=a;this.Vd=b;for(const c of a)l_tu(this,c)}Ed(){var a,b;const c=[],d=null===(a=this.Vd.i_.value)||void 0===a?void 0:a.id;a=new Map;if(!d)return[];for(const e of this.properties){const f=e.P_();for(const g in f){if(f[g].color.HB())continue;const h=f[g].Bab.get(d);if(h){const k=null!==(b=a.get(d))&&void 0!==b?b:{};a.has(d)||a.set(d,k);g in k?k[g].count+=h:k[g]={count:h,color:f[g].color,Bab:new Map}}}}for(const [e,f]of a.entries())b=
f,e===d&&c.push(...l_snd(b));return c}lg(){return!1}};var l_mcl=class{constructor(){this.ba={dAd:i18n.get("legend-item-control-colors-tab-label"),wLj:i18n.get("legend-item-control-shapes-tab-label")};this.nbi={type:"color",icon:l_kcl,label:this.ba.dAd};this.BLj={type:"shape",icon:l_tp,label:this.ba.wLj};this.tabs=[this.nbi,this.BLj]}};l_mcl=__decorate([l_r(),__metadata("design:paramtypes",[])],l_mcl);var l_ncl=class{constructor(a){this.jh=a;this.ba={description:i18n.get("legend-item-control-shapes-tab-zero-state-description")};this.imageUrl=l_oj+"/app/chart/dialogs/legend-block/zero-state.svg";this.imageWidth=84;this.imageHeight=44;this.jh.Pk(245)}};l_ncl.Ba=()=>[{type:l_Lm}];l_ncl.qa=function(a){return new (a||l_ncl)(l_J(l_Lm))};
l_ncl.Ja=l_E({type:l_ncl,Fa:[["lucid-legend-shapes-tab-zero-state"]],La:3,Ka:4,Ma:[[1,"zero-state-content"],[1,"empty-selection",3,"imgUrl","imgWidth","imgHeight"],[1,"description",3,"innerHTML"]],template:function(a,b){a&1&&(l_P(0,"div",0)(1,"lucid-empty-state",1),l_R(2,"div",2),l_Q()());a&2&&(l_L(1),l_O("imgUrl",b.imageUrl)("imgWidth",b.imageWidth)("imgHeight",b.imageHeight),l_L(1),l_O("innerHTML",b.ba.description,l_fy))},Na:[l_nH],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}[_nghost-%COMP%]   .zero-state-content[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;border:1px dashed var(--lucid-design-token-foreground-accent-color-css-var,#ced4db);border-radius:8px;margin:16px}[_nghost-%COMP%]   .description[_ngcontent-%COMP%]{padding-top:8px;color:var(--lucid-design-token-primary-foreground-color-css-var,#282c33);font-size:14px;line-height:20px;font-weight:var(--lucid-theme-normal-font-weight,400);font-style:normal;font-stretch:normal}"],
changeDetection:0});var l_ocl=class extends l_f{constructor(a,b){super();this.cO=b;this.y2e=new Map;this.Ia=new l_Wn(this);this.Ia.listen(a,l_AL,()=>{this.y2e.clear()});this.cO.listen(l_Y$h,c=>{this.y2e.set(c.g5i,new Set(c.Avj))})}};l_ocl=__decorate([l_r(),__metadata("design:paramtypes",[l_zL,l_1$h])],l_ocl);var l_pcl=class extends l_f{constructor(a,b){super();this.Ua=b;this.Mjg="shape";this.$S=a.yI(l_22.className,{lastUsedTab:{defaultValue:this.Mjg}})}};l_pcl=__decorate([l_r(),__metadata("design:paramtypes",[l_Ju,l_wn])],l_pcl);var l_qcl=class extends l_lcl{constructor(a,b,c){super([a,b],c)}};l_qcl=__decorate([l_r(),__metadata("design:paramtypes",[l_8Le,l_$Le,l_bN])],l_qcl);var l_rcl=l_rcl||{id:"cake/app/webroot/ts/libraries/defaultview/legenditemcontrol/legendshapestab/legendshapestab.component.closure.js"};function l_scl(a,b){if(a&1){const c=l_G();l_P(0,"div",7);l_S("lucidClick",function(){const d=l_H(c).Ga,e=l_T(2);return l_I(e.select(d))});l_Y(1,"lucidPipeValue");l_R(2,"lucid-shape-display-item",8);l_Q()}a&2&&(a=b.Ga,b=l_T(2),l_U("existing",l_Z(1,3,b.YZi.pipe(a))),l_L(2),l_O("toolboxDisplayItem",a))}
function l_tcl(a){a&1&&(l_P(0,"div",3)(1,"p",4),l_V(2),l_Q(),l_P(3,"div",5),l_N(4,l_scl,3,5,"div",6),l_Q()());a&2&&(a=l_T(),l_L(2),l_W(a.ba.tLj),l_L(2),l_O("ngForOf",a.items))}function l_ucl(a){a&1&&(l_P(0,"div"),l_R(1,"lucid-legend-shapes-tab-zero-state"),l_Q())}function l_vcl(a){return __awaiter(a,void 0,void 0,function*(){const b=this.jh.$l(245);return 0===this.items.length||!(yield b)})}
var l_e$=class extends l_f{constructor(a,b){super();this.c2c=a;this.jh=b;this.items=[];this.t_a=[];this.pRa=new l__;this.j5i=new l_tc(l_22.tC,l_22.tC);this.i2j=new l_Ge(this,c=>({pipe:new l_gCc(null,()=>l_eai(this.c2c,c,this.j5i),void 0,l_Lj(l_3$h)),Ml:!0}));this.YZi=new l_Ge(this,c=>({pipe:new l_u(null,()=>this.t_a.some(d=>l_Kj(d,this.i2j.value(c),l_3$h)),l_c),Ml:!0}));this.ba={tLj:i18n.get("legend-item-control-shapes-in-use-label")}}ngOnInit(){this.ZJa=l_vcl(this)}select(a){this.pRa.emit(a)}};
l_e$.Za=[{type:l_6y,args:[{cd:l_rcl.id,selector:"lucid-legend-shapes-tab",templateUrl:"./legendshapestab.component.html",changeDetection:l_Gx.OnPush}]}];l_e$.Ba=()=>[{type:l_jai},{type:l_Lm}];l_e$.Ie={items:[{type:l_0}],t_a:[{type:l_0}],pRa:[{type:l_7y}]};l_e$.qa=function(a){return new (a||l_e$)(l_J(l_jai),l_J(l_Lm))};
l_e$.Ja=l_E({type:l_e$,Fa:[["lucid-legend-shapes-tab"]],inputs:{items:"items",t_a:"existingShapeItems"},outputs:{pRa:"itemSelected"},features:[l_M],La:4,Ka:5,Ma:[[3,"vertical"],["class","siu-wrapper",4,"ngIf"],[4,"ngIf"],[1,"siu-wrapper"],[1,"siu-label"],[1,"shapes-container"],["class","shape-container",3,"existing","lucidClick",4,"ngFor","ngForOf"],[1,"shape-container",3,"lucidClick"],[3,"toolboxDisplayItem"]],template:function(a,b){a&1&&(l_P(0,"lucid-scrollable",0),l_N(1,l_tcl,5,2,"div",1),l_N(2,
l_ucl,2,0,"div",2),l_Y(3,"async"),l_Q());a&2&&(l_O("vertical",!0),l_L(1),l_O("ngIf",!!b.items.length),l_L(1),l_O("ngIf",l_Z(3,3,b.ZJa)))},Na:[l_Lz,l_3,l_iE,l_1C,l_HMg,l_ncl,l_Sz,l_4B],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}lucid-scrollable[_ngcontent-%COMP%]{max-height:236px}.siu-wrapper[_ngcontent-%COMP%]{padding:0 16px}.siu-label[_ngcontent-%COMP%]{font-size:12px;line-height:16px;font-weight:var(--lucid-theme-normal-font-weight,400);font-style:normal;font-stretch:normal;margin-top:16px;color:var(--lucid-design-token-secondary-foreground-color-css-var,#6f7681)}.shapes-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:4px}.shapes-container[_ngcontent-%COMP%]   .shape-container[_ngcontent-%COMP%]{width:40px;height:40px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.shapes-container[_ngcontent-%COMP%]   .shape-container.existing[_ngcontent-%COMP%]{border:1px solid var(--lucid-design-token-foreground-accent-color-css-var,#ced4db);border-radius:4px}.shapes-container[_ngcontent-%COMP%]   .shape-container[_ngcontent-%COMP%]:hover{background:var(--lucid-design-token-secondary-background-color-css-var,rgba(40,44,51,.08))}.shapes-container[_ngcontent-%COMP%]   .shape-container[_ngcontent-%COMP%]   lucid-shape-display-item[_ngcontent-%COMP%]{border-radius:4px;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transition:-webkit-transform .15s ease-in-out;-o-transition:transform .15s ease-in-out;transition:transform .15s ease-in-out;transition:transform .15s ease-in-out,-webkit-transform .15s ease-in-out}.shapes-container[_ngcontent-%COMP%]   .shape-container[_ngcontent-%COMP%]   lucid-shape-display-item[_ngcontent-%COMP%]:hover{-webkit-transform:scale(1.5);-ms-transform:scale(1.5);transform:scale(1.5)}"],
changeDetection:0});__decorate([l_Jr(),__metadata("design:type",Array)],l_e$.prototype,"t_a",void 0);l_e$=__decorate([l_Eb,__metadata("design:paramtypes",[l_jai,l_Lm])],l_e$);function l_wcl(a){a=a.obi.value;return 0<a.length?(a=a.map(b=>({type:"color",Bi:l_22.Bi,value:b})),l_Bai(a)):l_22.Fc()}
var l_xcl=class extends l_f{constructor(a,b,c,d,e,f){super();this.pJe=a;this.KXh=b;this.Ua=c;this.RA=d;this.viewport=e;this.a_a=f;this.obi=new l_u(this,()=>{const g=[...this.KXh.Ta()],h=l_wZd(this.pJe,!0),k=new Set([...h].map(l=>l.serialize()));return g.filter(l=>{l=l.serialize();return k.has(l)?!1:!0})},l_Oi(l_i1b))}OZc(a,b){a=a?l_wcl(this):l_22.Fc();a.className=l_22.className;a.BoundingBox=l_d8e(this.viewport,l_22.Ew,l_22.As);a.DynamicFontSize=this.a_a.hOb;const c=this.viewport.i_.value;c&&(this.RA.ys(c,
a,b)||this.Ua.ae("Not able to generate the new legend block. Talk to Di Ying or chart1 team to figure this issue out"))}};l_xcl=__decorate([l_r(),__metadata("design:paramtypes",[l_xZd,l_qcl,l_wn,l_JL,l_bN,l_yu])],l_xcl);function l_ycl(a,b){a&1&&(l_P(0,"lucid-finger-tab",5),l_R(1,"lucid-icon",6),l_P(2,"span"),l_V(3),l_Q()());a&2&&(a=b.Ga,l_O("tabName",a.type)("lucidClickIdentifier","legend-item-control-tab-"+a.type),l_L(1),l_O("icon",a.icon),l_L(2),l_W(a.label))}
function l_zcl(a){if(a&1){const b=l_G();l_P(0,"lucid-basic-color-picker",7);l_S("valueChange",function(c){l_H(b);l_T().UWd.emit({item:{type:"color",Bi:l_22.Bi,value:c}});return l_I(void 0)});l_Q()}a&2&&(a=l_T(),l_O("value",l_Acl(a))("showColorsInUse",!0))}
function l_Bcl(a){if(a&1){const b=l_G();l_P(0,"lucid-legend-shapes-tab",8);l_S("itemSelected",function(c){l_H(b);const d=l_T();return l_I(l_Ccl(d,c))});l_Y(1,"lucidPipeValue");l_Q()}a&2&&(a=l_T(),l_O("items",l_Z(1,2,a.Zwc.Wfe))("existingShapeItems",a.t_a))}function l_Acl(a){var b;return"color"!==(null===(b=a.HVb)||void 0===b?void 0:b.type)?l_o:a.HVb.value}
function l_Ccl(a,b){return __awaiter(a,void 0,void 0,function*(){const c=yield l_eai(this.c2c,b,new l_tc(l_22.tC,l_22.tC)),d={type:"shape",value:b.className};c&&this.UWd.emit({item:c,Nv:"from diagram key shape tab",asa:d})})}
var l_Dcl=class extends l_zA{constructor(a,b,c,d){super();this.i5i=a;this.Zwc=b;this.c2c=c;this.plg=d;this.t_a=[];this.UWd=new l__;this.VPf=new l_v(this,void 0,l_c);this.Y$g=new l_u(this,()=>{var e,f,g;return null!==(g=null!==(e=this.VPf.value)&&void 0!==e?e:null===(f=this.HVb)||void 0===f?void 0:f.type)&&void 0!==g?g:"color"},l_c);this.TUf=l_jcl}ngOnInit(){if(!this.HVb){var a=this.VPf;var b=this.plg;try{var c=b.$S.lastUsedTab}catch(d){c="Not able to read DiagramKeyUserStorage['lastUsedTab'].",d instanceof
Error&&(c=d.message,d.message="Not able to read DiagramKeyUserStorage['lastUsedTab']."),b.Ua.handleError({error:d,severity:"Minor",context:{sourceError:c}}),c=b.Mjg}a.value=c}}g3b(a){Object.values(l_jcl).includes(a)&&(this.VPf.setValue(a),this.plg.$S.lastUsedTab=a)}ngOnDestroy(){super.Lb()}};l_Dcl.Ba=()=>[{type:l_mcl},{type:l_yW},{type:l_jai},{type:l_pcl}];l_Dcl.qa=function(a){return new (a||l_Dcl)(l_J(l_mcl),l_J(l_yW),l_J(l_jai),l_J(l_pcl))};
l_Dcl.Ja=l_E({type:l_Dcl,Fa:[["lucid-legend-item-control"]],inputs:{HVb:"legendItem",t_a:"existingShapeItems"},outputs:{UWd:"legendItemChange"},features:[l_M],La:7,Ka:11,Ma:[[1,"horizontal",3,"spaceAround","value","noMargin","valueChange"],["class","light no-select-bg horizontal underline-style lucid-finger-tab-hover-animation condensed","data-test-id","'legend-item-control-tab-'+tab.type",3,"tabName","lucidClickIdentifier",4,"ngFor","ngForOf"],[1,"content",3,"ngSwitch"],[3,"value","showColorsInUse",
"valueChange",4,"ngSwitchCase"],[3,"items","existingShapeItems","itemSelected",4,"ngSwitchCase"],["data-test-id","'legend-item-control-tab-'+tab.type",1,"light","no-select-bg","horizontal","underline-style","lucid-finger-tab-hover-animation","condensed",3,"tabName","lucidClickIdentifier"],[3,"icon"],[3,"value","showColorsInUse","valueChange"],[3,"items","existingShapeItems","itemSelected"]],template:function(a,b){a&1&&(l_P(0,"lucid-inline-finger-tabs",0),l_S("valueChange",function(c){return b.g3b(c)}),
l_Y(1,"lucidPipeValue"),l_N(2,l_ycl,4,4,"lucid-finger-tab",1),l_Q(),l_P(3,"div",2),l_Y(4,"lucidPipeValue"),l_N(5,l_zcl,1,2,"lucid-basic-color-picker",3),l_N(6,l_Bcl,2,4,"lucid-legend-shapes-tab",4),l_Q());a&2&&(l_O("spaceAround",!0)("value",l_Z(1,7,b.Y$g))("noMargin",!0),l_L(2),l_O("ngForOf",b.i5i.tabs),l_L(1),l_O("ngSwitch",l_Z(4,9,b.Y$g)),l_L(2),l_O("ngSwitchCase",b.TUf.color),l_L(1),l_O("ngSwitchCase",b.TUf.shape))},Na:[l_Lz,l_Mz,l_Nz,l_jz,l_BY,l__S,l_HS,l_iC,l_e$,l_4B],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background:#fff;border-radius:4px;overflow:hidden;width:320px;min-height:300px}lucid-finger-tab[_ngcontent-%COMP%]{width:56px}lucid-finger-tab[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{max-width:56px;margin-top:4px;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;font-size:14px;line-height:20px;font-weight:var(--lucid-theme-normal-font-weight,400);font-style:normal;font-stretch:normal}"],
changeDetection:0});function l_Ecl(a,b){a.v_.g$a();let c;const d=a.zw.Ps({vo:l_Dcl,IJ:"left",cr:e=>{e.instance.HVb=b.HVb;e.instance.t_a=b.t_a;c=e.instance.UWd.subscribe(({item:f,Nv:g,asa:h})=>{var k;b.GJj({item:f,Nv:g,asa:h});null===(k=a.i7c)||void 0===k?void 0:k.close()})},Ad:b.Ltd,eLb:!0});d&&(a.i7c=d,a.i7c.BV.then(()=>{a.i7c===d&&(a.i7c=void 0);null===c||void 0===c?void 0:c.unsubscribe()}))}
var l_Fcl=class{constructor(a,b,c){this.zw=a;this.cO=b;this.v_=c}initialize(){this.cO.listen(l_W$h,a=>{l_Ecl(this,a)});this.cO.listen(l_Z$h.id,()=>{var a;null===(a=this.i7c)||void 0===a?void 0:a.close()})}};l_Fcl=__decorate([l_r(),__metadata("design:paramtypes",[l_4n,l_1$h,l_GL])],l_Fcl);var l_Gcl=class{};l_Gcl.qa=function(a){return new (a||l_Gcl)};l_Gcl.Wa=l_F({type:l_Gcl});l_Gcl.Va=l_D({imports:[l_4,l_8B,l_lE,l_JY,l_7S,l_lC,l_2C,l_jX,l_5H,l_4I,l_8B,l_2C,l_RA]});var l_Hcl=class{};l_Hcl.qa=function(a){return new (a||l_Hcl)};l_Hcl.Wa=l_F({type:l_Hcl});l_Hcl.Va=l_D({imports:[l_Gcl]});function l_Icl(a){a=l_lGh(a.deps.selection,l_22);return null!==a&&void 0!==a?a:void 0}var l_Jcl=class extends l_HN{constructor(a,b,c,d){super(a);this.deps=a;this.bDg=new l_u(this,()=>{{var e=l_Icl(this);const f=[];if(e)for(const g of e.bI.value){const h=l_12(e,g);f.push(h+e.tC.value/2+e.location.value.y)}e=f}return e},l_c);this.Yde=[b,d,c]}He(a){return a.He("c")}};l_Jcl=__decorate([l_gm(),__metadata("design:paramtypes",[l_FN,l_0ai,l_wnf,l_Yai])],l_Jcl);var l_Kcl=class extends l_Jcl{constructor(a,b){super(...a);this.hEd=b;this.name="legend-block-add-item";this.ba={P2f:i18n.get("legend-block-hint-add-item")};this.NL=this.HJ=!0}cursor(a){if(this.tk(a))return"pointer"}Zr({element:a,kc:b}){if(a&&l_C.Tb(a)&&this.GTb){if(l_Il(b.fb,this.GTb)&&a instanceof l_22){const c=l_pai(a);if(!l_e(c))return!1;l__$h(this.hEd,a.id,void 0,l_vai(a)).then(({item:d,Nv:e,asa:f})=>{l_rai(a,c,d,e,f)});this.deps.selection.deselectAll();this.deps.selection.Nl(a.id);l_0$h(this.hEd,
new l_Z2(a.id,[c]));return!0}return!1}}fTa(a){return this.tk(a)}tk({kc:a,zq:b}){return b?!!this.GTb&&l_Il(a.fb,this.GTb):!1}fuc(a){const b=a.ig,c=a.page;a=a.hs;this.GTb=void 0;a=l_1l(a);var d=l_Icl(this);if(d&&d.page.value===c&&a===c&&!l_8K(this.$c,d)&&!this.He(d)){a=d.Ca.value;var e=window.devicePixelRatio||1,f=d.jha.value;d=`renderAddLegendItem,${a.x},${a.y},${a.w},${a.h},${e},${f}`;const l=l_22.tC*f;var g=2*f,h=6*f;const m=4*f,n=4*f,p=new l_j(l_22.XR*f,a.h-.4*l);f={size:12*f,lineWidth:0,padding:6*
f};var {w:k}=b.measureText([this.ba.P2f],f);k=new l_q(l/2,0,k/e,l);e=[];e.push(l_hu(new l_A([new l_z(k.x,k.y),new l_y(k.x+k.w,k.y),new l_y(k.x+k.w,k.y+l),new l_y(k.x,k.y+l),new l_w]),{fillColor:l_ek}),l_hu(new l_A([...l_2xf({x:k.x+k.w-l/2,y:k.y,w:l,h:l},l/2),new l_w]),{strokeColor:l_ek,lineWidth:l/2}),l_hu(new l_A([...l_2xf({x:0,y:0,w:l,h:l},l/2),new l_w]),{strokeColor:l_Ik,lineWidth:l/2}),l_hu(new l_A([new l_z(l/2,h),new l_y(l/2,l-h),new l_z(h,l/2),new l_y(l-h,l/2)]),{fillColor:l_n,lineWidth:g,strokeColor:l_n,
lineCap:"round",Oa:l_n.Rc}));g=new l_q(0,0,k.w+l,k.h);h=l_5j(a.x+p.x,a.y+p.y);b.Vm({key:d,Od:e,mb:g,al:!1,transform:{Jj:c.id,Fj:h}});this.GTb=l_q.translate(g,a.x+p.x,a.y+p.y);b.ZF({text:this.ba.P2f,x:this.GTb.x+l+m,y:this.GTb.y+n,options:Object.assign(Object.assign({},f),{Fh:l_mk,padding:0,fillColor:l_o,QZ:!0,aJ:!0}),pageId:c.id})}}};l_Kcl=__decorate([l_r(),__param(0,l_lm(l_Jcl)),__metadata("design:paramtypes",[void 0,l_1$h])],l_Kcl);function l_Lcl(a,b,c){const d=c.Ca.value;var e;a:{if(a=l_Icl(a))for(const f of a.bI.value){const g=a.Ca.value,h={x:g.x,y:g.y+l_12(a,f),h:Math.max(null!==(e=a.ooc.get(f))&&void 0!==e?e:0,a.tC.value),w:g.w};if(l_Il(b,h)){e={vgm:f,b8g:h};break a}}e=void 0}return e?l_Il(b,{x:d.x+d.w-c.XR.value,y:e.b8g.y,w:c.tC.value,h:e.b8g.h}):!1}
var l_Mcl=class extends l_Jcl{constructor(a,b){super(...a);this.hEd=b;this.name="legend-block-delete-row"}Zr(a){const b=l_Icl(this);if(b&&l_wL(this.selection,b.id)&&l_Lcl(this,a.kc.fb,b)&&!this.He(b)){this.hEd.dispatchEvent(new l_Z2(b.id,[]));{a=a.kc.fb;const c=l_Icl(this);c?(a=c.bI.value[c.Xic(a)],a=0<=a?a:void 0):a=void 0}a&&l_hcl(b,a);return a?!0:!1}return!1}cursor({element:a,kc:b}){const c=l_Icl(this);if(c&&c.id===(null===a||void 0===a?void 0:a.id))return l_Lcl(this,b.fb,c)?"pointer":void 0}Ri({ig:a,
page:b,zoom:c}){const d=l_Icl(this);if(d&&!this.He(d)){const e=d.Ca.value.x+d.Ca.value.w-d.XR.value/2;for(const f of this.bDg.value)l_AN(a,{fb:{x:e,y:f},page:b,icon:l_zp,scale:c*d.jha.value,Gj:new l_Ea(d.id)})}}};l_Mcl=__decorate([l_r(),__param(0,l_lm(l_Jcl)),__metadata("design:paramtypes",[void 0,l_1$h])],l_Mcl);var l_Ncl=class extends l_Jcl{constructor(){super(...arguments);this.name="legend-block-drag-handles"}Ri({ig:a,page:b,zoom:c}){const d=l_Icl(this);if(d&&!this.He(d)){const e=d.Ca.value.x+d.XR.value/2;for(const f of this.bDg.value)l_AN(a,{fb:{x:e,y:f},page:b,icon:l_7o,scale:c*d.jha.value,Gj:new l_Ea(d.id)})}}He(a){return super.He(a)||a.He("p")}};l_Ncl=__decorate([l_r()],l_Ncl);function l_Ocl(a,b){var c;const d=l_mai(a,b),e=[];d||e;const f=(l,m)=>{const n=l.x,p=l.y,q=l.h;l=l.w;return new l_A([new l_z(n+l,p+q-m),new l_bu(n+l,p+q,n+l-m,p+q,m),new l_y(n+m,p+q),new l_bu(n,p+q,n,p+q-m,m),new l_y(n,p+m),new l_bu(n,p,n+m,p,m),new l_y(n+l-m,p),new l_bu(n+l,p,n+l,p+m,m),new l_w])},g=(l,m)=>{switch(m){case "color":return new l_A([...l_Iu(l),new l_w]);case "shape":return f(l,2);default:return new l_A([])}},h=a.location.value.x+a.XR.value,k=a.location.value.y+l_12(a,b);d&&e.push(l_hu(g({x:h,
y:k,w:a.tC.value,h:a.tC.value},d.type),{fillColor:void 0,lineWidth:2,Ic:!0,strokeColor:l_Hk,mSa:!0,strokeStyle:"solid"}));b={x:a.location.value.x+.125*l_22.XR,y:a.location.value.y+l_12(a,b),h:Math.max(a.tC.value,null!==(c=a.ooc.get(b))&&void 0!==c?c:0),w:a.Ca.value.w-.25*l_22.XR};e.push(l_hu(f(b,4),{fillColor:l_Hk.xa(.1)}));return e}function l_Pcl(a,b){const c=[];b.forEach(d=>{(d=l_mai(a,d))&&c.push(d.type.toString())});return c}
var l_Qcl=class extends l_Jcl{constructor(a,b){super(...a);this.Aqi=b;this.name="legend-row-highlight";this.NL=this.HJ=!1}Ri({ig:a,page:b}){var c,d=window.devicePixelRatio||1;const e=l_Icl(this);if(e){var f=null!==(c=this.Aqi.y2e.get(e.id))&&void 0!==c?c:new Set;c=e.bI.value;const g=l_Pcl(e,f),h=[];f.forEach(l=>{h.push(...l_Ocl(e,l))});const k=e.Ca.value;d=`renderLegendRowHighlight,${k.x},${k.y},${k.w},${k.h},${d},${[...f].join("-")},${c.join("-")},${g.join("-")}`;f=l_n0c(h);a.Vm({key:d,Od:h,mb:f,
al:!1,transform:{Jj:b.id,Fj:new l_6j}})}}};l_Qcl=__decorate([l_r(),__param(0,l_lm(l_Jcl)),__metadata("design:paramtypes",[void 0,l_ocl])],l_Qcl);function l_Rcl(a){const b=new l_xuc(i18n.get("tool-group-create-diagram-key"),()=>{a.OZc.OZc(!0,"button from shape panel")},"addNewDiagramKeyUnderShapeInUseButton");l_fcl(a.we,a.id,[b])}
var l_Scl=class extends l_3gj{constructor(a,b,c,d,e,f,g,h,k,l,m,n,p,q,r,t,u){super(a,d,e,t);this.OZc=q;this.waf=r;l_Rcl(this);l_ym(n,{Mf:[l_Dcl],module:l_Hcl});c.Vjb();b.Vjb();l_7P(f,{className:l_j0.className,rP:g.po()?"shape-change-panel font-picker font-size text-color text-emphasis text-alignment text-list-style item-link lock tridot".split(" "):[],lMa:["font-picker","font-size","text-color"]});l_7P(f,{className:l_Bgj,lMa:["crop-image-fill","image-fill-position","item-link","emoji"]});for(const v of[h,
k,l,m])for(const w of v.Yde)w.u2(v);p.initialize();b={action:()=>{this.OZc.OZc(!1,"selected from insert menu")},Ss:i18n.get("menu-item-add-diagram-key-additional-terms"),id:"add-diagram-key",label:i18n.get("menu-item-add-diagram-key"),Qnc:["left-align-content"]};l_gcl(this.waf,{kza:"insert",item:b});l_ecl(u,l_xgj,l_icl(this,a.document))}};
l_Scl=__decorate([l_r(),__param(3,l_im(l_Vcc)),__metadata("design:paramtypes",[l_AK,l_gsi,l_P4i,Object,l_yu,l_8P,l_UD,l_Mcl,l_Ncl,l_Kcl,l_Qcl,l_zm,l_Fcl,l_xcl,l_1Kf,l_CIe,l_a$b])],l_Scl);l_BK.set("defaultview",l_Scl);
//# sourceURL=/js/application/chart_app/chunk/defaultview.js?compiled=1
